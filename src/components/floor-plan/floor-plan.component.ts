import { Component, ChangeDetectionStrategy, input, computed } from '@angular/core';
import { CommonModule } from '@angular/common';

@Component({
  selector: 'app-floor-plan',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './floor-plan.component.html',
  changeDetection: ChangeDetectionStrategy.OnPush,
})
export class FloorPlanComponent {
  currentRoom = input.required<string>();
  patientAvatarUrl = input.required<string>();

  private readonly roomPositions: { [key: string]: { row: string, col: string } } = {
    'Dormitorio': { row: '1 / 2', col: '1 / 2' },
    'Baño': { row: '1 / 2', col: '2 / 3' },
    'Cocina': { row: '2 / 3', col: '2 / 3' },
    'Sala de estar': { row: '2 / 3', col: '1 / 2' },
    'Jardín': { row: '3 / 4', col: '1 / 3' }
  };
  
  protected markerPosition = computed(() => {
    const position = this.roomPositions[this.currentRoom()];
    return position || { row: '1 / 2', col: '1 / 2' }; // Default to bedroom
  });

  protected readonly ICONS = {
    bedroom: 'M8.25 15.75a.75.75 0 01.75.75c0 .414-.336.75-.75.75s-.75-.336-.75-.75a.75.75 0 01.75-.75zM9 11.25a3 3 0 100 6 3 3 0 000-6zM9 3.75a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 019 3.75zM15 3.75a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5a.75.75 0 01.75-.75zM3 9a.75.75 0 01.75.75v10.5a.75.75 0 01-1.5 0V9.75A.75.75 0 013 9zm18 0a.75.75 0 01.75.75v10.5a.75.75 0 01-1.5 0V9.75A.75.75 0 0121 9zm-15 8.25a.75.75 0 01.75-.75h9a.75.75 0 010 1.5h-9a.75.75 0 01-.75-.75z',
    bathroom: 'M3.75 6A2.25 2.25 0 016 3.75h2.25A2.25 2.25 0 0110.5 6v2.25a2.25 2.25 0 01-2.25 2.25H6a2.25 2.25 0 01-2.25-2.25V6zM13.5 6a2.25 2.25 0 012.25-2.25H18A2.25 2.25 0 0120.25 6v2.25A2.25 2.25 0 0118 10.5h-2.25a2.25 2.25 0 01-2.25-2.25V6zM3.75 15.75A2.25 2.25 0 016 13.5h2.25a2.25 2.25 0 012.25 2.25V18a2.25 2.25 0 01-2.25 2.25H6A2.25 2.25 0 013.75 18v-2.25zM13.5 15.75a2.25 2.25 0 012.25-2.25H18a2.25 2.25 0 012.25 2.25V18A2.25 2.25 0 0118 20.25h-2.25A2.25 2.25 0 0113.5 18v-2.25z',
    kitchen: 'M11.25 2.25c.99 0 1.83.62 2.15 1.5H9.1c.32-.88 1.16-1.5 2.15-1.5zM6.6 3.75c.34 0 .66.09.95.25h9.9a2.4 2.4 0 01.95-.25c.79 0 1.5.47 1.83.98L22.5 9.75V11.25a.75.75 0 01-1.5 0V10.5H3V11.25a.75.75 0 01-1.5 0V9.75l2.27-5.02c.33-.51 1.04-.98 1.83-.98zM4.1 8.25h15.8c.15 0 .29.07.38.19l-1.03 2.29a.75.75 0 01-.67.42H5.42a.75.75 0 01-.67-.42L3.72 8.44a.5.5 0 01.38-.19zM4.5 13.5a.75.75 0 01.75.75v3.75c0 .41.34.75.75.75h9c.41 0 .75-.34.75-.75V14.25a.75.75 0 011.5 0v3.75a2.25 2.25 0 01-2.25 2.25h-9A2.25 2.25 0 015.25 18V14.25a.75.75 0 01-.75-.75z',
    livingRoom: 'M3.75 17.25a.75.75 0 01.75-.75h15a.75.75 0 010 1.5h-15a.75.75 0 01-.75-.75zM4.5 9.75a.75.75 0 01.75-.75h13.5a.75.75 0 010 1.5H5.25a.75.75 0 01-.75-.75zM5.25 12.75a.75.75 0 01.75-.75h12a.75.75 0 010 1.5h-12a.75.75 0 01-.75-.75zM6 6.75a.75.75 0 01.75-.75h10.5a.75.75 0 010 1.5H6.75a.75.75 0 01-.75-.75zM7.5 3a.75.75 0 000 1.5h9a.75.75 0 000-1.5h-9z',
    garden: 'M13.5 5.25a2.25 2.25 0 00-4.5 0v2.25H13.5V5.25zM10.5 9a2.25 2.25 0 00-2.25 2.25v.75a2.25 2.25 0 004.5 0v-.75A2.25 2.25 0 0010.5 9zM15 9a2.25 2.25 0 00-2.25 2.25v.75a2.25 2.25 0 004.5 0v-.75A2.25 2.25 0 0015 9zM2.25 10.5A2.25 2.25 0 000 12.75v.75a2.25 2.25 0 004.5 0v-.75A2.25 2.25 0 002.25 10.5zM19.5 9a2.25 2.25 0 00-2.25 2.25v.75a2.25 2.25 0 004.5 0v-.75a2.25 2.25 0 00-2.25-2.25zM6 9a2.25 2.25 0 00-2.25 2.25v.75a2.25 2.25 0 004.5 0v-.75A2.25 2.25 0 006 9zM12 15a2.25 2.25 0 00-2.25 2.25v.75a2.25 2.25 0 004.5 0v-.75A2.25 2.25 0 0012 15z'
  };
}